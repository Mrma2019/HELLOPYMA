{"version":3,"file":"square.js","sources":["pages/square/square.vue","pages/square/square.vue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"content\">\r\n\t\t<view class=\"header\"\r\n\t\t\t:style=\"{height: systemInfo.navBarHeight + 'px', transform:`translateY(${translateY})`, opacity: opacity}\">\r\n\r\n\t\t</view>\r\n\t\t<scroll-view class=\"scroll-box\" scroll-y @scroll=\"onScroll\"\r\n\t\t\t:style=\"{height: '100vh', paddingTop: scrollPaddingTop + 'px'}\">\r\n\t\t\t<view v-for=\"item, index in 100\" :key=\"index\">\r\n\t\t\t\t<text>{{item}}</text>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport systemStore from '@/store/systemStore.js';\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\topacity: 1,\r\n\t\t\t\ttranslateY: '0px',\r\n\t\t\t\tscrollPaddingTop: systemStore.data.navBarHeight,\r\n\t\t\t\tlastScrollTop: 0\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tonScroll(e) {\r\n\t\t\t\tconsole.log(e.detail.scrollTop);\r\n\t\t\t\tif (current < 0) current = 0;\r\n\r\n\t\t\t\tlet lastScrollTop = 0;\r\n\t\t\t\tlet current = e.detail.scrollTop;\r\n\r\n\t\t\t\tconst last = this.lastScrollTop;\r\n\r\n\t\t\t\tif (current > last) {\r\n\t\t\t\t\tconsole.log('向下滚');\r\n\t\t\t\t\tconst maxScrollTop = this.systemInfo.navBarHeight;\r\n\t\t\t\t\tconst offset = Math.min(current, maxScrollTop);\r\n\t\t\t\t\tthis.translateY = -offset + 'px';\r\n\r\n\t\t\t\t\tthis.scrollPaddingTop = Math.min(this.systemInfo.navBarHeight - offset, this.systemInfo.navBarHeight);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log('向上滚');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 更新 lastScrollTop\r\n\t\t\t\tthis.lastScrollTop = current;\r\n\r\n\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tsystemInfo() {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tnavBarHeight\r\n\t\t\t\t} = systemStore.data;\r\n\t\t\t\treturn {\r\n\t\t\t\t\tnavBarHeight\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.header {\r\n\t\twidth: 100%;\r\n\t\tbackground-color: $uni-color-primary;\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tz-index: 10;\r\n\t\ttransition: transform 0.15s linear;\r\n\t}\r\n</style>","import MiniProgramPage from '/Volumes/CPBA_X64FRE/文稿/HBuilderProjects/HelloPyma/pyma/pages/square/square.vue'\nwx.createPage(MiniProgramPage)"],"names":["systemStore","uni"],"mappings":";;;AAiBC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,SAAS;AAAA,MACT,YAAY;AAAA,MACZ,kBAAkBA,kBAAAA,YAAY,KAAK;AAAA,MACnC,eAAe;AAAA;EAEhB;AAAA,EACD,SAAS;AAAA,IACR,SAAS,GAAG;AACXC,oBAAY,MAAA,MAAA,OAAA,iCAAA,EAAE,OAAO,SAAS;AAC9B,UAAI,UAAU;AAAG,kBAAU;AAG3B,UAAI,UAAU,EAAE,OAAO;AAEvB,YAAM,OAAO,KAAK;AAElB,UAAI,UAAU,MAAM;AACnBA,sBAAAA,MAAY,MAAA,OAAA,iCAAA,KAAK;AACjB,cAAM,eAAe,KAAK,WAAW;AACrC,cAAM,SAAS,KAAK,IAAI,SAAS,YAAY;AAC7C,aAAK,aAAa,CAAC,SAAS;AAE5B,aAAK,mBAAmB,KAAK,IAAI,KAAK,WAAW,eAAe,QAAQ,KAAK,WAAW,YAAY;AAAA,aAC9F;AACNA,sBAAAA,MAAY,MAAA,OAAA,iCAAA,KAAK;AAAA,MAClB;AAGA,WAAK,gBAAgB;AAAA,IAItB;AAAA,EACA;AAAA,EACD,UAAU;AAAA,IACT,aAAa;AACZ,YAAM;AAAA,QACL;AAAA,MACD,IAAID,kBAAAA,YAAY;AAChB,aAAO;AAAA,QACN;AAAA;IAEF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;AC/DD,GAAG,WAAW,eAAe;"}