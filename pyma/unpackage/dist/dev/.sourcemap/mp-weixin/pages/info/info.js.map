{"version":3,"file":"info.js","sources":["pages/info/info.vue","F:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5mby9pbmZvLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"content\">\r\n\t\t<uni-nav-bar :title=\"pageInfo?.navTitle\" :align=\"pageInfo?.navAlgin\" :color=\"pageInfo?.navColor\"></uni-nav-bar>\r\n\t\t<scroll-view id=\"page-content\" scroll-y :style=\"{paddingTop: systemInfo?.navBarHeight + gap + 'px'}\">\r\n\t\t\t<view class=\"content-wrapper\">\r\n\t\t\t\t<view class=\"profile-card border-box flex-col\">\r\n\t\t\t\t\t<view class=\"avatar-wrapper flex-row\">\r\n\t\t\t\t\t\t<image class=\"avatar\" :src=\"userInfo.avatarUrl || defaultAvatarUrl\" mode=\"widthFix\">\r\n\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t<text class=\"nickname\">{{userInfo.nickname || '--'}}</text>\r\n\t\t\t\t\t\t<view class=\"menu-btn flex-row\" hover-class=\"menu-btn__hover\" @click=\"openPopup\">\r\n\t\t\t\t\t\t\t<text class=\"iconfont\">&#xe627;</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"edit flex-col\">\r\n\t\t\t\t\t\t<view class=\"block flex-row\">\r\n\t\t\t\t\t\t\t<text class=\"iconfont\">&#xe726;</text>\r\n\t\t\t\t\t\t\t<view class=\"block__content flex-col\">\r\n\t\t\t\t\t\t\t\t<text class=\"text\">编辑个人资料</text>\r\n\t\t\t\t\t\t\t\t<text class=\"desc\">完善信息</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-for=\"(nav, navIndex) in pageInfo.navList\" :key=\"navIndex\" class=\"nav-card border-box flex-col\">\r\n\t\t\t\t\t<text class=\"title\">{{ nav.title }}</text>\r\n\t\t\t\t\t<view class=\"item-nav border-box flex-row\" v-for=\"(item, itemIndex) in nav.item_list\"\r\n\t\t\t\t\t\t:key=\"itemIndex\" hover-class=\"item-nav__hover\">\r\n\t\t\t\t\t\t<text class=\"iconfont\">{{ item.unicode }}</text>\r\n\t\t\t\t\t\t<text class=\"text\">{{ item.text }}</text>\r\n\t\t\t\t\t\t<text class=\"iconfont\">&#xe628;</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t\t<uni-popup v-model:show=\"is_popup\" :height=\"popupBoxHeight\">\r\n\t\t\t<view class=\"popup-content border-box flex-col\" catchtouchmove>\r\n\t\t\t\t<view class=\"header border-box flex-col\">\r\n\t\t\t\t\t<text class=\"title\">{{appName}}申请</text>\r\n\t\t\t\t\t<text class=\"desc\">获取你的昵称、头像和权限</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"avatar-wrapper line-item border-box flex-row\">\r\n\t\t\t\t\t<text class=\"item-text\">头像</text>\r\n\t\t\t\t\t<button class=\"choose-avatar\" open-type=\"chooseAvatar\" @chooseavatar=\"onChooseAvatar\">\r\n\t\t\t\t\t\t<image class=\"avatar-img\" :src=\"userInfo.avatarUrl || defaultAvatarUrl\" mode=\"widthFix\">\r\n\t\t\t\t\t\t</image>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<text class=\"iconfont\">&#xe628;</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"nickname-input line-item border-box flex-row\">\r\n\t\t\t\t\t<text class=\"item-text\">昵称</text>\r\n\t\t\t\t\t<input type=\"nickname\" :value=\"userInfo.nickname || userInfoRaw.nickname\" placeholder=\"请输入你的昵称\"\r\n\t\t\t\t\t\t@change=\"onInput\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"btns flex-row\">\r\n\t\t\t\t\t<view class=\"cancle item-btn\" @click=\"onCancle\">\r\n\t\t\t\t\t\t<text>取消</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"submit item-btn\" @click=\"onSubmit\">\r\n\t\t\t\t\t\t<text>允许</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\t\t<uni-tab-bar></uni-tab-bar>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport systemStore from '@/store/systemStore.js';\r\n\timport getPageInfo from './index.js';\r\n\timport userStore from '@/store/userStore.js';\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tappName: 'HELLOPYMA',\r\n\t\t\t\tpageInfo: {},\r\n\t\t\t\tgap: 10,\r\n\t\t\t\tis_popup: false,\r\n\t\t\t\tpopupBoxHeight: '45',\r\n\t\t\t\tdefaultAvatarUrl: '/static/avatar.jpg',\r\n\t\t\t\tuserInfoRaw: {\r\n\t\t\t\t\tavatarUrl: '',\r\n\t\t\t\t\tnickname: '',\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 点击头像右侧的下拉按钮显示\r\n\t\t\topenPopup() {\r\n\t\t\t\tthis.is_popup = true;\r\n\t\t\t},\r\n\t\t\t// 点击取消按钮\r\n\t\t\tonCancle() {\r\n\t\t\t\tthis.is_popup = false;\r\n\t\t\t},\r\n\t\t\tonChooseAvatar(e) {\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t\tconst {\r\n\t\t\t\t\tavatarUrl\r\n\t\t\t\t} = e.detail;\r\n\t\t\t\tconsole.log('avatarUrl', avatarUrl);\r\n\t\t\t\tthis.defaultAvatarUrl = avatarUrl;\r\n\t\t\t\tthis.userInfoRaw.avatarUrl = avatarUrl;\r\n\t\t\t},\r\n\t\t\tonInput(e) {\r\n\t\t\t\tconst nickname = e.target.value;\r\n\t\t\t\tconsole.log('nickName input', nickname);\r\n\t\t\t\tthis.userInfoRaw.nickname = nickname;\r\n\t\t\t},\r\n\t\t\t// 点击提交按钮\r\n\t\t\tonSubmit() {\r\n\t\t\t\tuni.setStorage({\r\n\t\t\t\t\tkey: \"userInfo\",\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tavatarUrl: this.userInfoRaw.avatarUrl,\r\n\t\t\t\t\t\tnickname: this.userInfoRaw.nickname\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tObject.assign(this.userInfo, {\r\n\t\t\t\t\tavatarUrl: this.userInfoRaw.avatarUrl,\r\n\t\t\t\t\tnickname: this.userInfoRaw.nickname\r\n\t\t\t\t})\r\n\t\t\t\tthis.is_popup = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync mounted() {\r\n\t\t\tthis.pageInfo = await getPageInfo();\r\n\t\t\t// 当屏幕宽度大于等于768px时,改变默认的高度\r\n\t\t\tif (this.systemInfo.screenWidth >= 768) {\r\n\t\t\t\tconsole.log('screenWidth>=768');\r\n\t\t\t\tthis.popupBoxHeight = '60';\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 页面隐藏或者挑战时,隐藏弹出层\r\n\t\t// onHide() {\r\n\t\t// \tthis.is_popup = false;\r\n\t\t// },\r\n\t\tcomputed: {\r\n\t\t\tsystemInfo() {\r\n\t\t\t\tconst data = systemStore.data;\r\n\t\t\t\tconsole.log('inof', data);\r\n\t\t\t\treturn {\r\n\t\t\t\t\tnavBarHeight: data.navBarHeight,\r\n\t\t\t\t\tscreenWidth: data.screenWidth\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tuserInfo() {\r\n\t\t\t\tconst data = userStore.data;\r\n\t\t\t\treturn data;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t$ele-border-radius: 20rpx;\r\n\t$avatar-width: 100rpx;\r\n\t$ele-padding: 20rpx;\r\n\r\n\t::v-deep(.nav-bar) {\r\n\t\tbackground-color: $uni-page-bg-color !important;\r\n\t}\r\n\r\n\t.profile-card {\r\n\t\twidth: 95%;\r\n\t\theight: max-content;\r\n\t\tbackground-color: $uni-color-primary;\r\n\t\tborder-radius: $ele-border-radius;\r\n\t\tcolor: #fff;\r\n\r\n\t\t.avatar-wrapper {\r\n\t\t\talign-items: center;\r\n\t\t\tpadding: $ele-padding;\r\n\t\t\tposition: relative;\r\n\t\t\tborder-bottom: 1px solid #ddd;\r\n\r\n\t\t\t.avatar {\r\n\t\t\t\twidth: 100rpx;\r\n\t\t\t\theight: 100rpx;\r\n\t\t\t\tmargin-left: 20rpx;\r\n\t\t\t\tborder-radius: $ele-border-radius;\r\n\t\t\t\tborder: 2px solid #fff;\r\n\t\t\t}\r\n\r\n\t\t\t.nickname {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\tpadding: 0 $avatar-width 0 40rpx;\r\n\t\t\t\twhite-space: nowrap;\r\n\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t}\r\n\r\n\t\t\t.menu-btn {\r\n\t\t\t\twidth: 40rpx;\r\n\t\t\t\theight: 40rpx;\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tright: 40rpx;\r\n\t\t\t\tbackground-color: #fff;\r\n\t\t\t\tborder-radius: 50%;\r\n\t\t\t\tcolor: $uni-color-primary;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tbox-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);\r\n\t\t\t\ttransition: transform 0.25s ease-out;\r\n\t\t\t\twill-change: transform;\r\n\r\n\t\t\t\t.iconfont {\r\n\t\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.menu-btn__hover {\r\n\t\t\t\ttransform: scale(1.2);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.edit {\r\n\t\t\twidth: 100%;\r\n\t\t\tpadding: $ele-padding;\r\n\t\t\tfont-size: 30rpx;\r\n\t\t\tcolor: #fff;\r\n\r\n\t\t\t.block {\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tcolor: #ddd;\r\n\t\t\t\tfont-weight: bold;\r\n\r\n\t\t\t\t.iconfont {\r\n\t\t\t\t\tfont-size: 40rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.block__content {\r\n\t\t\t\t\tpadding-left: $ele-padding;\r\n\r\n\t\t\t\t\t.text {\r\n\t\t\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.desc {\r\n\t\t\t\t\t\tfont-size: 20rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.nav-card {\r\n\t\twidth: 95%;\r\n\t\theight: max-content;\r\n\t\tmargin-top: 40rpx;\r\n\t\talign-items: flex-start;\r\n\t\tcolor: $uni-color-primary;\r\n\t\tborder: 1px solid $uni-color-primary;\r\n\t\tpadding-bottom: 0;\r\n\t\tborder-radius: $ele-border-radius;\r\n\r\n\t\t.title {\r\n\t\t\tdisplay: inline-block;\r\n\t\t\twidth: 100%;\r\n\t\t\tpadding: $ele-padding;\r\n\t\t\tbackground-color: $uni-color-primary;\r\n\t\t\tfont-size: 30rpx;\r\n\t\t\tfont-weight: bold;\r\n\t\t\tcolor: #fff;\r\n\t\t}\r\n\r\n\t\t.item-nav__hover {\r\n\t\t\tbackground-color: #ddd;\r\n\t\t}\r\n\r\n\t\t.item-nav {\r\n\t\t\twidth: 100%;\r\n\t\t\talign-items: center;\r\n\t\t\tpadding: $ele-padding;\r\n\t\t\tborder-bottom: 1px solid #ddd;\r\n\t\t\tposition: relative;\r\n\t\t\tfont-size: 32rpx;\r\n\r\n\t\t\t&:last-child {\r\n\t\t\t\tborder-bottom: none;\r\n\t\t\t}\r\n\r\n\t\t\t.text {\r\n\t\t\t\tpadding-left: $ele-padding;\r\n\t\t\t}\r\n\r\n\t\t\t.iconfont {\r\n\t\t\t\t&:nth-child(3) {\r\n\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\tleft: 90%;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.popup-content {\r\n\t\tpadding: 0 40rpx;\r\n\t\theight: 100%;\r\n\r\n\t\t.header {\r\n\t\t\theight: #{$avatar-width + 20};\r\n\t\t\tjustify-content: space-around;\r\n\r\n\t\t\t.title {\r\n\t\t\t\tfont-size: 35rpx;\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t}\r\n\r\n\t\t\t.desc {\r\n\t\t\t\tfont-size: 25rpx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.line-item {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: #{$avatar-width + 20};\r\n\t\t\tpadding: 20rpx 0;\r\n\t\t\tjustify-content: flex-start;\r\n\t\t\talign-items: center;\r\n\t\t\tborder-bottom: 1px solid #ddd;\r\n\t\t}\r\n\r\n\t\t.item-text {\r\n\t\t\tmargin-right: 40rpx;\r\n\t\t\tfont-size: 30rpx;\r\n\t\t}\r\n\r\n\t\t.avatar-wrapper {\r\n\t\t\t.choose-avatar {\r\n\t\t\t\twidth: $avatar-width !important;\r\n\t\t\t\theight: $avatar-width !important;\r\n\t\t\t\tpadding: 0;\r\n\t\t\t\tmargin: 0;\r\n\t\t\t\tborder: 1px solid #ddd;\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\tbackground: transparent;\r\n\t\t\t\tborder-radius: 50%;\r\n\t\t\t\tposition: relative;\r\n\r\n\t\t\t\t.avatar-img {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\tdisplay: block;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.iconfont {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tleft: 90%;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.btns {\r\n\t\t\tflex: 1;\r\n\t\t\tjustify-content: space-around;\r\n\t\t\talign-items: center;\r\n\t\t\tfont-size: 30rpx;\r\n\r\n\t\t\t.item-btn {\r\n\t\t\t\tpadding: 20rpx 120rpx;\r\n\t\t\t\tborder: 1px solid #ddd;\r\n\t\t\t}\r\n\r\n\t\t\t.submit {\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tbackground-color: $uni-color-primary;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'C:/Users/pyma/Documents/HBuilderProjects/HELLOPYMA/pyma/pages/info/info.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","getPageInfo","systemStore","userStore"],"mappings":";;;;;AAyEC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,SAAS;AAAA,MACT,UAAU,CAAE;AAAA,MACZ,KAAK;AAAA,MACL,UAAU;AAAA,MACV,gBAAgB;AAAA,MAChB,kBAAkB;AAAA,MAClB,aAAa;AAAA,QACZ,WAAW;AAAA,QACX,UAAU;AAAA,MACX;AAAA,IACD;AAAA,EACA;AAAA,EACD,SAAS;AAAA;AAAA,IAER,YAAY;AACX,WAAK,WAAW;AAAA,IAChB;AAAA;AAAA,IAED,WAAW;AACV,WAAK,WAAW;AAAA,IAChB;AAAA,IACD,eAAe,GAAG;AACjBA,oBAAAA,gDAAY,CAAC;AACb,YAAM;AAAA,QACL;AAAA,UACG,EAAE;AACNA,oBAAA,MAAA,MAAA,OAAA,8BAAY,aAAa,SAAS;AAClC,WAAK,mBAAmB;AACxB,WAAK,YAAY,YAAY;AAAA,IAC7B;AAAA,IACD,QAAQ,GAAG;AACV,YAAM,WAAW,EAAE,OAAO;AAC1BA,oBAAA,MAAA,MAAA,OAAA,8BAAY,kBAAkB,QAAQ;AACtC,WAAK,YAAY,WAAW;AAAA,IAC5B;AAAA;AAAA,IAED,WAAW;AACVA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,QACL,MAAM;AAAA,UACL,WAAW,KAAK,YAAY;AAAA,UAC5B,UAAU,KAAK,YAAY;AAAA,QAC5B;AAAA,MACD,CAAC;AACD,aAAO,OAAO,KAAK,UAAU;AAAA,QAC5B,WAAW,KAAK,YAAY;AAAA,QAC5B,UAAU,KAAK,YAAY;AAAA,OAC3B;AACD,WAAK,WAAW;AAAA,IACjB;AAAA,EACA;AAAA,EACD,MAAM,UAAU;AACf,SAAK,WAAW,MAAMC,iBAAAA;AAEtB,QAAI,KAAK,WAAW,eAAe,KAAK;AACvCD,oBAAAA,MAAY,MAAA,OAAA,8BAAA,kBAAkB;AAC9B,WAAK,iBAAiB;AAAA,IACvB;AAAA,EACA;AAAA;AAAA;AAAA;AAAA;AAAA,EAKD,UAAU;AAAA,IACT,aAAa;AACZ,YAAM,OAAOE,kBAAW,YAAC;AACzBF,qEAAY,QAAQ,IAAI;AACxB,aAAO;AAAA,QACN,cAAc,KAAK;AAAA,QACnB,aAAa,KAAK;AAAA,MACnB;AAAA,IACA;AAAA,IACD,WAAW;AACV,YAAM,OAAOG,gBAAS,UAAC;AACvB,aAAO;AAAA,IACR;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxJD,GAAG,WAAW,eAAe;"}