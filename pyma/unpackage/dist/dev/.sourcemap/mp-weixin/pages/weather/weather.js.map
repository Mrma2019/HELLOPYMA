{"version":3,"file":"weather.js","sources":["pages/weather/weather.vue","pages/weather/weather.vue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"content\">\r\n\t\t<uni-nav-bar class=\"nav-bar__component\" :align=\"pageInfo?.navAlgin\" :title=\"pageInfo?.navTitle\"\r\n\t\t\t:color=\"pageInfo?.navColor\" , :is-back=\"pageInfo?.isBack\" @sendNavBarHeight=\"getNavHeight\"></uni-nav-bar>\r\n\t\t<view class=\"content-wrapper fixed-box\" :style=\"{paddingTop: navigatorHeight + 'px'}\">\r\n\t\t\t<scroll-view id=\"page-content\" class=\"border-box\" scroll-y>\r\n\t\t\t\t<view class=\"content-panel flex-col\" style=\"padding-bottom: 100rpx;\">\r\n\t\t\t\t\t<view class=\"location flex-row\">\r\n\t\t\t\t\t\t<view class=\"flex-row\" style=\"height: 100%; align-items: center;\">\r\n\t\t\t\t\t\t\t<text class=\"addr\">{{weatherInfo.location?.name || '--'}}</text>\r\n\t\t\t\t\t\t\t<text class=\"date\">{{date || '--'}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<text class=\"update_time\">{{weatherInfo?.updateTime || '--'}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"now-info flex-row\">\r\n\t\t\t\t\t\t<view class=\"flex-row\">\r\n\t\t\t\t\t\t\t<text class=\"temp\">{{weatherInfo?.temp || '--'}}</text>\r\n\t\t\t\t\t\t\t<text class=\"temp-icon iconfont\">&#xe9a6;</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<text :class=\"['qi-' + weatherInfo?.icon, weatherInfo?.icon == 100 ? 'rotate':'breath']\"></text>\r\n\t\t\t\t\t\t<text class=\"text\">{{weatherInfo?.text || '--'}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"info__card card border-box flex-row\">\r\n\t\t\t\t\t\t<view class=\"item flex-col\">\r\n\t\t\t\t\t\t\t<text class=\"desc\">风速</text>\r\n\t\t\t\t\t\t\t<text class=\"icon qi-1080\"></text>\r\n\t\t\t\t\t\t\t<text class=\"text\">{{weatherInfo?.windSpeed}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"item flex-col\">\r\n\t\t\t\t\t\t\t<text class=\"desc\">云量</text>\r\n\t\t\t\t\t\t\t<text class=\"icon qi-509\"></text>\r\n\t\t\t\t\t\t\t<text class=\"text\">{{weatherInfo?.cloud}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"item flex-col\">\r\n\t\t\t\t\t\t\t<text class=\"desc\">体感温度</text>\r\n\t\t\t\t\t\t\t<text class=\"icon qi-2396\"></text>\r\n\t\t\t\t\t\t\t<text class=\"text\">{{weatherInfo?.feelsLike}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"grid-info__card card border-box flex-col\">\r\n\t\t\t\t\t\t<view class=\"item flex-row\" v-for=\"item, index in weatherInfo?.gridInfo\" :key=\"index\">\r\n\t\t\t\t\t\t\t<text>{{item.day || '--'}}</text>\r\n\t\t\t\t\t\t\t<text>\r\n\t\t\t\t\t\t\t\t<text :class=\"['qi-'+item.iconDay]\"></text>\r\n\t\t\t\t\t\t\t\t<text style=\"margin-left: 8rpx;\">{{item.textDay}}</text>\r\n\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t<text>{{item.tempMax || '--'}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"indices__card card border-box flex-row\">\r\n\t\t\t\t\t\t<view class=\"flex-col\" style=\"justify-content: center; align-items: center;\">\r\n\t\t\t\t\t\t\t<text class=\"item-name\">{{weatherInfo?.indices?.name || '--'}}</text>\r\n\t\t\t\t\t\t\t<text class=\"iconfont\">&#xe629;</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"flex-col\"\r\n\t\t\t\t\t\t\tstyle=\"flex: 1; justify-content: center; align-items: flex-start; padding-left: 40rpx;\">\r\n\t\t\t\t\t\t\t<text class=\"item-category\">{{weatherInfo?.indices?.category || '--'}}</text>\r\n\t\t\t\t\t\t\t<text class=\"item-text\">{{weatherInfo?.indices?.text || '--'}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"footer\">\r\n\t\t\t\t\t\t<text>{{footer}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport weatherStore from '@/store/weatherStore.js';\r\n\timport getPageInfo from './index.js';\r\n\timport formatDate from '@/utils/format.js'\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tpageInfo: {},\r\n\t\t\t\tnavigatorHeight: 0,\r\n\t\t\t\tfooter: '数据来源：和风天气Api',\r\n\t\t\t\tdate: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetNavHeight(height) {\r\n\t\t\t\tthis.navigatorHeight = height;\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync onLoad() {\r\n\t\t\tthis.pageInfo = await getPageInfo();\r\n\t\t\tconst eventChannel = this.getOpenerEventChannel();\r\n\t\t\teventChannel.on('acceptDataFromOpenerPage', (data) => {\r\n\t\t\t\t// console.log('接收到的数据:', data.dateInfo);\r\n\t\t\t\tconst dateInfo = data.dateInfo;\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdate,\r\n\t\t\t\t\ttime,\r\n\t\t\t\t\tday\r\n\t\t\t\t} = dateInfo;\r\n\t\t\t\tthis.date = `${date} ${day}`\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tonShow() {\r\n\t\t\tconsole.log(this.date);\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tweatherInfo() {\r\n\t\t\t\tconst data = weatherStore.data;\r\n\t\t\t\tconst gridInfo = (weatherStore.girdInfo?.daily).map(item => {\r\n\t\t\t\t\tconst fd = formatDate(item.fxDate);\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...item,\r\n\t\t\t\t\t\tday: fd.day\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t// console.log(gridInfo);\r\n\r\n\t\t\t\tconst indices = weatherStore.indices.daily[0];\r\n\t\t\t\t// console.log(indices);\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tgridInfo,\r\n\t\t\t\t\tindices,\r\n\t\t\t\t\ticon: data?.icon || '--',\r\n\t\t\t\t\ttemp: data?.temp || '--',\r\n\t\t\t\t\ttext: data?.text || '--',\r\n\t\t\t\t\tlocation: data?.location || '--',\r\n\t\t\t\t\tupdateTime: data.obsTime?.match(/\\d{2}:\\d{2}/)[0] + '更新' || '--',\r\n\t\t\t\t\tcloud: `${data?.cloud || '--'}%`,\r\n\t\t\t\t\twindSpeed: `${data?.windSpeed || '--'}Km/h`,\r\n\t\t\t\t\tfeelsLike: `${data?.feelsLike || '--'}℃`\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t$panel-width: 90%;\r\n\t$ele-border-radius: 20rpx;\r\n\t$ele-margin: 20rpx;\r\n\r\n\t.content-wrapper {\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.card {\r\n\t\twidth: $panel-width;\r\n\t\tborder-radius: $ele-border-radius;\r\n\t\tbackground-color: $uni-color-primary;\r\n\t\tfont-size: 30rpx;\r\n\t\tpadding: 30rpx 40rpx;\r\n\t}\r\n\r\n\t#page-content {\r\n\t\tbackground: linear-gradient(to bottom, $uni-color-primary, #e8e8e8);\r\n\r\n\t\t.content-panel {\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\t}\r\n\r\n\t.location {\r\n\t\twidth: $panel-width;\r\n\t\theight: 80rpx;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tbox-sizing: border-box;\r\n\t\toverflow: hidden;\r\n\r\n\t\t.addr {\r\n\t\t\tfont-size: 40rpx;\r\n\t\t}\r\n\r\n\t\t.date {\r\n\t\t\tmargin-left: 20rpx;\r\n\t\t\tfont-size: 25rpx;\r\n\t\t}\r\n\r\n\t\t.update_time {\r\n\t\t\tfont-size: 30rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.now-info {\r\n\t\twidth: $panel-width;\r\n\t\theight: 280rpx;\r\n\t\tfont-size: 140rpx;\r\n\t\tjustify-content: space-around;\r\n\t\talign-items: center;\r\n\r\n\t\t.temp-icon {\r\n\t\t\tfont-size: 35rpx;\r\n\t\t}\r\n\r\n\t\t.text {\r\n\t\t\tfont-size: 45rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.info__card {\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tbackground-color: $uni-color-primary;\r\n\t\topacity: 0.7;\r\n\r\n\t\t.item {\r\n\t\t\talign-items: center;\r\n\r\n\t\t\t.desc {\r\n\t\t\t\tfont-size: 30rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.icon {\r\n\t\t\t\tfont-size: 100rpx;\r\n\t\t\t\tfont-weight: normal !important;\r\n\t\t\t}\r\n\r\n\t\t\t.text {\r\n\t\t\t\tfont-size: 30rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.grid-info__card {\r\n\t\topacity: 0.8;\r\n\t\tmargin: $ele-margin 0;\r\n\r\n\t\t.item {\r\n\t\t\theight: 80rpx;\r\n\t\t\tjustify-content: space-around;\r\n\t\t\talign-items: center;\r\n\r\n\t\t\tborder-bottom: 1px solid #fff;\r\n\r\n\t\t\t&:last-child {\r\n\t\t\t\tborder-bottom: none;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.indices__card {\r\n\t\tjustify-content: flex-start;\r\n\t\talign-items: center;\r\n\t\tbackground-color: $uni-color-primary;\r\n\t\topacity: 0.8;\r\n\r\n\t\t.item-name {\r\n\t\t\tpadding: 20rpx 0;\r\n\t\t\tfont-size: 30rpx;\r\n\t\t}\r\n\r\n\t\t.iconfont {\r\n\t\t\tfont-size: 100rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.footer {\r\n\t\tcolor: $uni-color-primary;\r\n\t\tfont-size: 20rpx;\r\n\t\tpadding: 20rpx 0;\r\n\t}\r\n</style>","import MiniProgramPage from '/Volumes/CPBA_X64FRE/文稿/HBuilderProjects/HelloPyma/pyma/pages/weather/weather.vue'\nwx.createPage(MiniProgramPage)"],"names":["getPageInfo","uni","weatherStore","formatDate"],"mappings":";;;;;AA0EC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,UAAU,CAAE;AAAA,MACZ,iBAAiB;AAAA,MACjB,QAAQ;AAAA,MACR,MAAM;AAAA,IACP;AAAA,EACA;AAAA,EACD,SAAS;AAAA,IACR,aAAa,QAAQ;AACpB,WAAK,kBAAkB;AAAA,IACxB;AAAA,EACA;AAAA,EACD,MAAM,SAAS;AACd,SAAK,WAAW,MAAMA,oBAAAA;AACtB,UAAM,eAAe,KAAK;AAC1B,iBAAa,GAAG,4BAA4B,CAAC,SAAS;AAErD,YAAM,WAAW,KAAK;AACtB,YAAM;AAAA,QACL;AAAA,QACA;AAAA,QACA;AAAA,MACC,IAAE;AACJ,WAAK,OAAO,GAAG,IAAI,IAAI,GAAG;AAAA,IAC3B,CAAC;AAAA,EACD;AAAA,EAED,SAAS;AACRC,kBAAY,MAAA,MAAA,OAAA,oCAAA,KAAK,IAAI;AAAA,EACrB;AAAA,EACD,UAAU;AAAA,IACT,cAAc;;AACb,YAAM,OAAOC,mBAAY,aAAC;AAC1B,YAAM,aAAYA,wBAAY,aAAC,aAAbA,mBAAuB,OAAO,IAAI,UAAQ;AAC3D,cAAM,KAAKC,aAAAA,WAAW,KAAK,MAAM;AACjC,eAAO;AAAA,UACN,GAAG;AAAA,UACH,KAAK,GAAG;AAAA,QACT;AAAA,MACD,CAAC;AAGD,YAAM,UAAUD,mBAAY,aAAC,QAAQ,MAAM,CAAC;AAG5C,aAAO;AAAA,QACN;AAAA,QACA;AAAA,QACA,OAAM,6BAAM,SAAQ;AAAA,QACpB,OAAM,6BAAM,SAAQ;AAAA,QACpB,OAAM,6BAAM,SAAQ;AAAA,QACpB,WAAU,6BAAM,aAAY;AAAA,QAC5B,cAAY,UAAK,YAAL,mBAAc,MAAM,eAAe,MAAK,QAAQ;AAAA,QAC5D,OAAO,IAAG,6BAAM,UAAS,IAAI;AAAA,QAC7B,WAAW,IAAG,6BAAM,cAAa,IAAI;AAAA,QACrC,WAAW,IAAG,6BAAM,cAAa,IAAI;AAAA;IAEvC;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtID,GAAG,WAAW,eAAe;"}